<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Instructions - Govt Victoria College</title>
    <link href="https://fonts.googleapis.com/css2?family=Anek+Malayalam:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Anek Malayalam', sans-serif; background-color: #f0f4f8; }
        .playing-icon { animation: pulse-ring 2s infinite; }
        @keyframes pulse-ring {
            0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen pb-24">

    <!-- Audio Controls -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2">
        <div id="debug-msg" class="hidden bg-slate-800 text-white text-xs py-2 px-3 rounded shadow-lg max-w-xs text-right"></div>
        
        <button id="speakBtn" onclick="toggleSpeech()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold p-4 rounded-full shadow-lg flex items-center justify-center transition-all w-16 h-16">
            <svg id="playIcon" class="w-8 h-8 ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            <svg id="stopIcon" class="w-8 h-8 hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg>
        </button>
    </div>

    <div class="max-w-4xl mx-auto bg-white shadow-xl mt-8 rounded-xl overflow-hidden border-t-8 border-blue-800">
        <div class="bg-blue-50 p-8 text-center border-b border-blue-100">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-900 mb-2">ഗവണ്‍മെന്‍റ് വിക്ടോറിയ കോളേജ് പാലക്കാട്</h1>
            <h2 class="text-xl md:text-2xl font-semibold text-blue-800 mt-4">ഇന്‍വിജിലേഷന്‍ ഡ്യൂട്ടിയുമായി ബന്ധപ്പെട്ട പൊതു നിര്‍ദ്ദേശങ്ങള്‍</h2>
        </div>

        <div id="content-container" class="p-6 md:p-10 space-y-8 text-lg leading-loose text-slate-800">
            <div class="readable-chunk">
                ഏറ്റവും പുതിയ യുജിസി റെഗുലേഷന്‍ അനുസരിച്ചും വിവിധ കോടതി വിധികള്‍ അനുസരിച്ചും പരീക്ഷാ ജോലികള്‍ അദ്ധ്യാപകരുടെ ജോലിയുടെ ഭാഗമാണ്.
            </div>
            
            <div class="bg-blue-50 p-4 rounded border-l-4 border-blue-500 readable-chunk">
                പരീക്ഷാ ഡ്യൂട്ടി സംബന്ധിച്ച നിര്‍ദേശം ലഭിച്ചു കഴിഞ്ഞതിന് ശേഷം എന്തെങ്കിലും അസൌകര്യങ്ങള്‍ ഉണ്ടെങ്കില്‍ ഡ്യൂട്ടി സ്വയം മറ്റ് ആരെയെങ്കിലും ഏല്‍പ്പിക്കുകയോ ബദല്‍ സംവിധാനം ഏര്‍പ്പെടുത്തുകയോ ചെയ്യേണ്ടതും ആയത് ചീഫ് സൂപ്രണ്ടിനെയോ എസ് എ എസി നെയോ അറിയിക്കേണ്ടതും ആണ്.
            </div>

            <div class="readable-chunk">
                <strong>1. പരീക്ഷ തുടങ്ങുന്നതിന് മുന്‍പ്:</strong><br>
                പരീക്ഷ തുടങ്ങുന്നതിന് അര മണിക്കൂര്‍ മുന്‍പ് എങ്കിലും ചീഫ് സൂപ്രണ്ടിന്റെ ഒഫീസില്‍ ഹാജരാകേണ്ടതാണ്. പ്രത്യേക നിര്‍ദേശങ്ങള്‍ ശ്രദ്ധാപൂര്‍വ്വം കേട്ടു മനസിലാക്കുക. ആർ എൻ ബി ബി യിൽ ഹാളിലേക്ക് അനുവദിക്കപ്പെട്ടിട്ടുള്ള വിദ്യാര്‍ഥികളുടെ റെജിസ്റ്റര്‍ നമ്പര്‍ രേഖപ്പെടുത്തുക.
            </div>

            <div class="readable-chunk">
                <strong>2. പരീക്ഷാ ഹാളിൽ:</strong><br>
                അനുവദിക്കപ്പെട്ട കുട്ടികള്‍ തന്നെ ആണ് ഇരിക്കുന്നത് എന്നു ഉറപ്പ് വരുത്തുക. പുസ്തകങ്ങള്‍, പേപ്പറുകള്‍, മൊബൈല്‍ ഫോണ്‍ എന്നിവ മാറ്റി വെക്കാന്‍ ആവശ്യപ്പെടുക. ബെല്ലടിക്കുമ്പോള്‍ ചോദ്യ പേപ്പര്‍ വിതരണം ചെയ്യുക.
            </div>

            <div class="bg-red-50 p-4 rounded border border-red-200 readable-chunk text-red-900">
                <strong>ശ്രദ്ധിക്കുക:</strong> പരീക്ഷ തുടങ്ങി അര മണിക്കൂറിന് ശേഷം കുട്ടികളെ ഹാളില്‍ കയറാന്‍ അനുവദിക്കരുത്. അര മണിക്കൂർ കഴിഞ്ഞതിനു ശേഷം മാത്രം ആബ്സെന്റ് ആയ കുട്ടികളുടെ നമ്പറിന് നേരെ ആബ്സെന്റ് എന്നു ചുവന്ന മഷിയില്‍ രേഖപ്പെടുത്തുക. ഇതില്‍ വരുന്ന തെറ്റുകള്‍ക്ക് 5000 രൂപ ഫൈന്‍ ഈടാക്കും.
            </div>

            <div class="readable-chunk">
                <strong>3. പരീക്ഷാ അവസാനം:</strong><br>
                പരീക്ഷാ ഹാളില്‍ പൂര്‍ണ നിശബ്ദത പാലിക്കുക. ഫോണ്‍ സൈലന്റ് മോഡിൽ വെക്കുക. പരീക്ഷ തുടങ്ങി ഒരു മണിക്കൂറിന് ശേഷം മാത്രമേ കുട്ടികളെ ഹാള്‍ വിടാന്‍ അനുവദിക്കാവൂ. പരീക്ഷ അവസാനിക്കുന്നതിന് 5 മിനിറ്റ് മുന്നേ പേപ്പറുകള്‍ കെട്ടാന്‍ നിർദ്ദേശം നൽകുക.
            </div>
        </div>
    </div>

    <script>
        let isSpeaking = false;
        let chunks = [];
        let currentChunk = 0;
        let malayalamVoice = null;
        const msgBox = document.getElementById('debug-msg');

        // 1. Load Voices Robustly
        function loadVoices() {
            const voices = window.speechSynthesis.getVoices();
            // Look for voices with 'ml', 'malayalam', or fallback to Google's India voices
            malayalamVoice = voices.find(v => v.lang.includes('ml') || v.name.toLowerCase().includes('malayalam'));
            
            if (voices.length > 0 && !malayalamVoice) {
                // If no specific Malayalam voice, warn user but allow try (some browsers handle it auto)
                console.warn("Malayalam specific voice not found.");
            }
        }

        // Chrome loads voices asynchronously
        window.speechSynthesis.onvoiceschanged = loadVoices;
        loadVoices(); // Try immediately too

        function prepareText() {
            const elements = document.querySelectorAll('.readable-chunk');
            let fullText = "";
            elements.forEach(el => fullText += el.innerText + " . ");
            // Split by periods to create manageable pauses
            chunks = fullText.split('.').filter(t => t.trim().length > 0);
        }

        function toggleSpeech() {
            if (isSpeaking) {
                window.speechSynthesis.cancel();
                isSpeaking = false;
                updateUI(false);
                msgBox.classList.add('hidden');
            } else {
                // Check compatibility
                if (!malayalamVoice && window.speechSynthesis.getVoices().length > 0) {
                     msgBox.innerText = "Malayalam voice pack not detected. Audio might be silent or incorrect on this device. Try on Android.";
                     msgBox.classList.remove('hidden');
                } else {
                     msgBox.innerText = "വായിക്കുന്നു...";
                     msgBox.classList.remove('hidden');
                }

                prepareText();
                currentChunk = 0;
                isSpeaking = true;
                updateUI(true);
                speakNext();
            }
        }

        function speakNext() {
            if (!isSpeaking || currentChunk >= chunks.length) {
                isSpeaking = false;
                updateUI(false);
                return;
            }

            const utterance = new SpeechSynthesisUtterance(chunks[currentChunk]);
            
            if (malayalamVoice) utterance.voice = malayalamVoice;
            utterance.lang = 'ml-IN';
            utterance.rate = 0.9;

            utterance.onend = () => {
                currentChunk++;
                speakNext();
            };
            
            utterance.onerror = (e) => {
                console.error(e);
                isSpeaking = false;
                updateUI(false);
                msgBox.innerText = "Audio Error. Device may not support TTS.";
            };

            window.speechSynthesis.speak(utterance);
        }

        function updateUI(active) {
            const btn = document.getElementById('speakBtn');
            const play = document.getElementById('playIcon');
            const stop = document.getElementById('stopIcon');
            
            if (active) {
                btn.classList.add('bg-red-600', 'playing-icon');
                btn.classList.remove('bg-blue-600');
                play.classList.add('hidden');
                stop.classList.remove('hidden');
            } else {
                btn.classList.remove('bg-red-600', 'playing-icon');
                btn.classList.add('bg-blue-600');
                play.classList.remove('hidden');
                stop.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
